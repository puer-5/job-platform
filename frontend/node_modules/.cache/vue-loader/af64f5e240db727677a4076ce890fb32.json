{"remainingRequest":"E:\\微服务开发实验\\期末项目\\job-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\微服务开发实验\\期末项目\\job-platform\\frontend\\src\\views\\SeekerResumeManage.vue?vue&type=style&index=0&id=3278d9f1&scoped=true&lang=css","dependencies":[{"path":"E:\\微服务开发实验\\期末项目\\job-platform\\frontend\\src\\views\\SeekerResumeManage.vue","mtime":1750255031569},{"path":"E:\\微服务开发实验\\期末项目\\job-platform\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":1750207404238},{"path":"E:\\微服务开发实验\\期末项目\\job-platform\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1750207407070},{"path":"E:\\微服务开发实验\\期末项目\\job-platform\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1750207405229},{"path":"E:\\微服务开发实验\\期末项目\\job-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1750207403375},{"path":"E:\\微服务开发实验\\期末项目\\job-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1750207406160}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoucmVzdW1lLWNvbnRhaW5lciB7DQogIHBhZGRpbmc6IDIwcHg7DQp9DQoucmVzdW1lLWNvbnRlbnQgew0KICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KfQ0KLnJlc3VtZS1hY3Rpb25zLXNpbmdsZSB7DQogIGRpc3BsYXk6IGZsZXg7DQogIGdhcDogMTZweDsNCiAgbWFyZ2luLXRvcDogMjBweDsNCn0NCi5lbXB0eS1zdGF0ZSB7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgcGFkZGluZzogNjBweCAyMHB4Ow0KICBjb2xvcjogIzkwOTM5OTsNCn0NCi5lbXB0eS1zdGF0ZSBpIHsNCiAgZm9udC1zaXplOiA2NHB4Ow0KICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KICBjb2xvcjogI2MwYzRjYzsNCn0NCi5lbXB0eS1zdGF0ZSBwIHsNCiAgbWFyZ2luOiAwIDAgMjBweCAwOw0KICBmb250LXNpemU6IDE2cHg7DQp9DQouZWR1Y2F0aW9uLWZvcm0gew0KICBib3JkZXI6IDFweCBzb2xpZCAjZGNkZmU2Ow0KICBib3JkZXItcmFkaXVzOiA0cHg7DQogIHBhZGRpbmc6IDE1cHg7DQogIGJhY2tncm91bmQ6ICNmYWZhZmE7DQp9DQouZWR1Y2F0aW9uLWl0ZW0gew0KICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICBwYWRkaW5nOiAxMHB4Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjZTRlN2VkOw0KICBib3JkZXItcmFkaXVzOiA0cHg7DQogIGJhY2tncm91bmQ6IHdoaXRlOw0KfQ0KLmVkdWNhdGlvbi1pdGVtOmxhc3QtY2hpbGQgew0KICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KfQ0KLnNraWxscy1mb3JtIHsNCiAgbWluLWhlaWdodDogNDBweDsNCiAgcGFkZGluZzogNXB4Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjZGNkZmU2Ow0KICBib3JkZXItcmFkaXVzOiA0cHg7DQogIGJhY2tncm91bmQ6IHdoaXRlOw0KfQ0KLnNraWxsLWlucHV0IHsNCiAgd2lkdGg6IDEwMHB4Ow0KICBtYXJnaW4tcmlnaHQ6IDhweDsNCiAgbWFyZ2luLWJvdHRvbTogOHB4Ow0KfQ0KLmRpYWxvZy1mb290ZXIgew0KICB0ZXh0LWFsaWduOiByaWdodDsNCn0NCi5yZXN1bWUtZm9vdGVyIHsNCiAgZGlzcGxheTogZmxleDsNCiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICBwYWRkaW5nLXRvcDogMTVweDsNCiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlYmVlZjU7DQogIGNvbG9yOiAjOTA5Mzk5Ow0KICBmb250LXNpemU6IDEycHg7DQp9DQouc2VjdGlvbiB7DQogIHBhZGRpbmc6IDEwcHg7DQogIGJvcmRlcjogMXB4IHNvbGlkICNlYmVlZjU7DQogIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgbWFyZ2luLWJvdHRvbTogMTBweDsNCn0NCi5zZWN0aW9uIGg0IHsNCiAgbWFyZ2luOiAwIDAgMTBweCAwOw0KICBjb2xvcjogIzMwMzEzMzsNCiAgZm9udC1zaXplOiAxNHB4Ow0KICBmb250LXdlaWdodDogYm9sZDsNCn0NCi5zZWN0aW9uIGRpdiB7DQogIGNvbG9yOiAjNjA2MjY2Ow0KICBsaW5lLWhlaWdodDogMS42Ow0KICBmb250LXNpemU6IDEzcHg7DQp9DQo="},{"version":3,"sources":["SeekerResumeManage.vue"],"names":[],"mappings":";AA0TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SeekerResumeManage.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"resume-container\">\r\n    <div v-if=\"resume\">\r\n      <!-- 简历内容展示 -->\r\n      <div class=\"resume-content\">\r\n        <h3>{{ resume.title }}</h3>\r\n        <div class=\"resume-summary\">\r\n          <p>{{ resume.experienceSummary }}</p>\r\n        </div>\r\n        <div class=\"resume-sections\">\r\n          <div v-if=\"resume.educationDetails\" class=\"section\">\r\n            <h4>教育背景</h4>\r\n            <div v-html=\"formatJsonContent(resume.educationDetails)\"></div>\r\n          </div>\r\n          <div v-if=\"resume.skills\" class=\"section\">\r\n            <h4>技能特长</h4>\r\n            <div v-html=\"formatJsonContent(resume.skills)\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"resume-footer\">\r\n          <span class=\"create-time\">创建时间：{{ formatDate(resume.createdAt) }}</span>\r\n        </div>\r\n      </div>\r\n      <!-- 操作按钮 -->\r\n      <div class=\"resume-actions-single\">\r\n        <el-button type=\"primary\" @click=\"openDialog(resume)\">编辑</el-button>\r\n        <el-button type=\"danger\" @click=\"deleteResume(resume.id)\">删除</el-button>\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"empty-state\">\r\n      <i class=\"el-icon-document\"></i>\r\n      <p>暂无简历</p>\r\n      <el-button type=\"primary\" @click=\"openDialog()\">新增简历</el-button>\r\n    </div>\r\n    <!-- 编辑/新增弹窗 -->\r\n    <el-dialog \r\n      :title=\"dialogForm.id ? '编辑简历' : '新增简历'\" \r\n      :visible.sync=\"dialogVisible\" \r\n      width=\"800px\"\r\n      :before-close=\"handleDialogClose\"\r\n    >\r\n      <el-form :model=\"dialogForm\" :rules=\"rules\" ref=\"resumeForm\" label-width=\"100px\">\r\n        <el-form-item label=\"简历标题\" prop=\"title\">\r\n          <el-input v-model=\"dialogForm.title\" placeholder=\"请输入简历标题\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"经验总结\" prop=\"experienceSummary\">\r\n          <el-input \r\n            type=\"textarea\" \r\n            v-model=\"dialogForm.experienceSummary\" \r\n            :rows=\"4\"\r\n            placeholder=\"请简要描述您的工作经验和求职意向\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"教育背景\">\r\n          <div class=\"education-form\">\r\n            <div v-for=\"(edu, index) in educationList\" :key=\"index\" class=\"education-item\">\r\n              <el-row :gutter=\"10\">\r\n                <el-col :span=\"6\">\r\n                  <el-input v-model=\"edu.school\" placeholder=\"学校名称\" />\r\n                </el-col>\r\n                <el-col :span=\"6\">\r\n                  <el-input v-model=\"edu.major\" placeholder=\"专业\" />\r\n                </el-col>\r\n                <el-col :span=\"4\">\r\n                  <el-select v-model=\"edu.degree\" placeholder=\"学历\">\r\n                    <el-option label=\"高中\" value=\"高中\" />\r\n                    <el-option label=\"专科\" value=\"专科\" />\r\n                    <el-option label=\"本科\" value=\"本科\" />\r\n                    <el-option label=\"硕士\" value=\"硕士\" />\r\n                    <el-option label=\"博士\" value=\"博士\" />\r\n                  </el-select>\r\n                </el-col>\r\n                <el-col :span=\"4\">\r\n                  <el-date-picker\r\n                    v-model=\"edu.graduationDate\"\r\n                    type=\"date\"\r\n                    placeholder=\"毕业时间\"\r\n                    format=\"yyyy-MM-dd\"\r\n                    value-format=\"yyyy-MM-dd\"\r\n                  />\r\n                </el-col>\r\n                <el-col :span=\"4\">\r\n                  <el-button type=\"danger\" size=\"small\" @click=\"removeEducation(index)\" icon=\"el-icon-delete\">删除</el-button>\r\n                </el-col>\r\n              </el-row>\r\n            </div>\r\n            <el-button type=\"primary\" size=\"small\" @click=\"addEducation\" icon=\"el-icon-plus\">添加教育经历</el-button>\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item label=\"技能特长\">\r\n          <div class=\"skills-form\">\r\n            <el-tag\r\n              v-for=\"(skill, index) in skillsList\"\r\n              :key=\"index\"\r\n              closable\r\n              @close=\"removeSkill(index)\"\r\n              style=\"margin-right: 8px; margin-bottom: 8px;\"\r\n            >\r\n              {{ skill }}\r\n            </el-tag>\r\n            <el-input\r\n              v-if=\"skillInputVisible\"\r\n              ref=\"skillInput\"\r\n              v-model=\"skillInputValue\"\r\n              class=\"skill-input\"\r\n              size=\"small\"\r\n              @keyup.enter.native=\"confirmSkill\"\r\n              @blur=\"confirmSkill\"\r\n            />\r\n            <el-button v-else size=\"small\" @click=\"showSkillInput\" icon=\"el-icon-plus\">添加技能</el-button>\r\n          </div>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"handleDialogClose\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveResume\" :loading=\"saving\">保存</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'SeekerResumeManage',\r\n  data() {\r\n    return {\r\n      resume: null, // 只存一份简历\r\n      dialogVisible: false,\r\n      saving: false,\r\n      dialogForm: {\r\n        id: null,\r\n        title: '',\r\n        experienceSummary: '',\r\n        educationDetails: '',\r\n        skills: '',\r\n        isDefault: false\r\n      },\r\n      educationList: [],\r\n      skillsList: [],\r\n      skillInputVisible: false,\r\n      skillInputValue: '',\r\n      rules: {\r\n        title: [\r\n          { required: true, message: '请输入简历标题', trigger: 'blur' }\r\n        ],\r\n        experienceSummary: [\r\n          { required: true, message: '请输入经验总结', trigger: 'blur' }\r\n        ]\r\n      },\r\n      jobSeekerId: null\r\n    };\r\n  },\r\n  mounted() {\r\n    this.jobSeekerId = JSON.parse(atob(localStorage.getItem('token').split('.')[1])).userId;\r\n    this.fetchResume();\r\n  },\r\n  methods: {\r\n    async fetchResume() {\r\n      try {\r\n        const response = await axios.get(`/resumes/jobseeker/${this.jobSeekerId}`);\r\n        this.resume = response.data && response.data.length > 0 ? response.data[0] : null;\r\n      } catch (error) {\r\n        this.resume = null;\r\n      }\r\n    },\r\n    openDialog(resume = null) {\r\n      this.dialogForm = resume\r\n        ? { ...resume }\r\n        : { id: null, title: '', experienceSummary: '', educationDetails: '', skills: '', isDefault: false };\r\n      // 初始化教育背景\r\n      this.educationList = [];\r\n      if (resume && resume.educationDetails) {\r\n        try {\r\n          const educationData = JSON.parse(resume.educationDetails);\r\n          if (Array.isArray(educationData)) {\r\n            this.educationList = educationData;\r\n          }\r\n        } catch (e) {}\r\n      }\r\n      if (this.educationList.length === 0) {\r\n        this.addEducation();\r\n      }\r\n      // 初始化技能\r\n      this.skillsList = [];\r\n      if (resume && resume.skills) {\r\n        try {\r\n          const skillsData = JSON.parse(resume.skills);\r\n          if (Array.isArray(skillsData)) {\r\n            this.skillsList = skillsData;\r\n          }\r\n        } catch (e) {}\r\n      }\r\n      this.dialogVisible = true;\r\n    },\r\n    addEducation() {\r\n      this.educationList.push({ school: '', major: '', degree: '', graduationDate: '' });\r\n    },\r\n    removeEducation(index) {\r\n      this.educationList.splice(index, 1);\r\n    },\r\n    showSkillInput() {\r\n      this.skillInputVisible = true;\r\n      this.$nextTick(() => {\r\n        this.$refs.skillInput.$refs.input.focus();\r\n      });\r\n    },\r\n    confirmSkill() {\r\n      if (this.skillInputValue.trim()) {\r\n        this.skillsList.push(this.skillInputValue.trim());\r\n      }\r\n      this.skillInputVisible = false;\r\n      this.skillInputValue = '';\r\n    },\r\n    removeSkill(index) {\r\n      this.skillsList.splice(index, 1);\r\n    },\r\n    handleDialogClose() {\r\n      this.$confirm('确定要关闭吗？未保存的内容将丢失', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.dialogVisible = false;\r\n        this.$refs.resumeForm.resetFields();\r\n        this.educationList = [];\r\n        this.skillsList = [];\r\n      }).catch(() => {});\r\n    },\r\n    async saveResume() {\r\n      try {\r\n        await this.$refs.resumeForm.validate();\r\n        this.saving = true;\r\n        const saveData = {\r\n          ...this.dialogForm,\r\n          educationDetails: JSON.stringify(this.educationList.filter(edu => edu.school && edu.major)),\r\n          skills: JSON.stringify(this.skillsList)\r\n        };\r\n        if (this.dialogForm.id) {\r\n          await axios.put(`/resumes/${this.dialogForm.id}`, saveData);\r\n          this.$message.success('简历更新成功');\r\n        } else {\r\n          const newResume = {\r\n            ...saveData,\r\n            jobSeekerId: this.jobSeekerId\r\n          };\r\n          await axios.post('/resumes', newResume);\r\n          this.$message.success('简历创建成功');\r\n        }\r\n        this.dialogVisible = false;\r\n        this.fetchResume();\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          const errorMessage = error.response && error.response.data && error.response.data.message \r\n            ? error.response.data.message \r\n            : error.message;\r\n          this.$message.error('保存简历失败: ' + errorMessage);\r\n        }\r\n      } finally {\r\n        this.saving = false;\r\n      }\r\n    },\r\n    async deleteResume(id) {\r\n      try {\r\n        await this.$confirm('确定要删除这份简历吗？删除后无法恢复', '确认删除', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        });\r\n        await axios.delete(`/resumes/${id}`);\r\n        this.$message.success('简历删除成功');\r\n        this.fetchResume();\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          const errorMessage = error.response && error.response.data && error.response.data.message \r\n            ? error.response.data.message \r\n            : error.message;\r\n          this.$message.error('删除简历失败: ' + errorMessage);\r\n        }\r\n      }\r\n    },\r\n    formatDate(dateString) {\r\n      if (!dateString) return '';\r\n      const date = new Date(dateString);\r\n      return date.toLocaleString('zh-CN');\r\n    },\r\n    formatJsonContent(content) {\r\n      if (!content) return '';\r\n      try {\r\n        const parsed = JSON.parse(content);\r\n        if (Array.isArray(parsed)) {\r\n          if (parsed.length > 0 && typeof parsed[0] === 'object') {\r\n            return parsed.map(edu => \r\n              `<div>• ${edu.school} - ${edu.major} - ${edu.degree} - ${edu.graduationDate || '在读'}</div>`\r\n            ).join('');\r\n          } else {\r\n            return parsed.map(skill => `<div>• ${skill}</div>`).join('');\r\n          }\r\n        } else if (typeof parsed === 'object') {\r\n          return Object.entries(parsed).map(([key, value]) => \r\n            `<div><strong>${key}:</strong> ${value}</div>`\r\n          ).join('');\r\n        }\r\n        return parsed;\r\n      } catch (e) {\r\n        return content.replace(/\\n/g, '<br>');\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.resume-container {\r\n  padding: 20px;\r\n}\r\n.resume-content {\r\n  margin-bottom: 15px;\r\n}\r\n.resume-actions-single {\r\n  display: flex;\r\n  gap: 16px;\r\n  margin-top: 20px;\r\n}\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 60px 20px;\r\n  color: #909399;\r\n}\r\n.empty-state i {\r\n  font-size: 64px;\r\n  margin-bottom: 20px;\r\n  color: #c0c4cc;\r\n}\r\n.empty-state p {\r\n  margin: 0 0 20px 0;\r\n  font-size: 16px;\r\n}\r\n.education-form {\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  padding: 15px;\r\n  background: #fafafa;\r\n}\r\n.education-item {\r\n  margin-bottom: 15px;\r\n  padding: 10px;\r\n  border: 1px solid #e4e7ed;\r\n  border-radius: 4px;\r\n  background: white;\r\n}\r\n.education-item:last-child {\r\n  margin-bottom: 10px;\r\n}\r\n.skills-form {\r\n  min-height: 40px;\r\n  padding: 5px;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  background: white;\r\n}\r\n.skill-input {\r\n  width: 100px;\r\n  margin-right: 8px;\r\n  margin-bottom: 8px;\r\n}\r\n.dialog-footer {\r\n  text-align: right;\r\n}\r\n.resume-footer {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding-top: 15px;\r\n  border-top: 1px solid #ebeef5;\r\n  color: #909399;\r\n  font-size: 12px;\r\n}\r\n.section {\r\n  padding: 10px;\r\n  border: 1px solid #ebeef5;\r\n  border-radius: 4px;\r\n  margin-bottom: 10px;\r\n}\r\n.section h4 {\r\n  margin: 0 0 10px 0;\r\n  color: #303133;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n}\r\n.section div {\r\n  color: #606266;\r\n  line-height: 1.6;\r\n  font-size: 13px;\r\n}\r\n</style>\r\n"]}]}